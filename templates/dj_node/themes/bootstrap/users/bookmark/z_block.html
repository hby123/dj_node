{% load dj_node_tags %}

{% dj_node_bookmark content_type|instance|status %}

{% if status %}
	<button class="btn btn-primary" disabled="disabled">
	   <span class="glyphicon glyphicon-heart "></span>
	</button>
{% else %}
	{% if user.is_authenticated %}
		<button class="btn btn-primary">
	   		 <span class="glyphicon glyphicon-heart "></span>
		</button>

		<script>
			$( document ).ready(function() {
				$( ".bookmark" ).click(function() {
					var n1 = new DjNodeAjax({'type':'GET',
										   	   'url':'{% url 'bookmark-add' %}?ajax=true&content_type={{content_type.id}}&object_id={{instance.id}}',
										       'selector':'.bookmark',
										       'node_type':'btn'},
											   null,
										  	   function(){
											   		$(".bookmark").html("{% if label_done %}{{label_done}}{% else %}Bookmarked{% endif %}");
											   });
					n1.ajax();
				});
			})
		  </script>
	{% else %}
          <button onclick="location.href='{% url 'login' %}';" class="btn btn-primary">
	   		 <span class="glyphicon glyphicon-heart"></span>
		  </button>
	{% endif %}
{% endif %}
